[![Gameplay Demo](img/sample1.png)](https://www.youtube.com/watch?v=qITD623zyWI)

μ΄λ―Έμ§€ ν΄λ¦­ μ‹ μ‹μ—° μ νλΈ μμƒμΌλ΅ μ΄λ™

# ν”„λ΅μ νΈ κ°μ”
- μ λ‹ν‹°μ™€ C# λ°λ””μΌ€μ΄ν‹°λ“ μ„λ²„λ¥Ό μ‚¬μ©ν• μµλ€ 4μΈ μ‹¤μ‹κ°„ λ€μ „ κ²μ„.
- λ‹¤μ–‘ν• λ™κΈ°ν™” κΈ°λ²•μ„ μ μ©ν•μ—¬ μ§€μ—° ν™κ²½μ—μ„λ„ μΌκ΄€λκ³  ν•©λ¦¬μ μΈ ν”λ μ΄ κ²½ν—μ„ μ κ³µ

## κ°λ° μ •λ³΄
- κ°λ° μΈμ›: 1μΈ
- ν΄λΌμ΄μ–ΈνΈ: Unity
- μ„λ²„: C# .NET TCP μ†μΌ“ κΈ°λ° λ°λ””μΌ€μ΄ν‹°λ“ μ„λ²„

## μ£Όμ” κΈ°λ¥
### π”§ λ„¤νΈμ›ν¬ κµ¬μ΅°
- ν΄λΌμ΄μ–ΈνΈ μμΈ΅ (Client-side Prediction)
  ν΄λΌμ΄μ–ΈνΈλ” μ‚¬μ©μμ μ…λ ¥μ„ μ„λ²„μ— μ „μ†΅ν•λ” λ™μ‹μ—, ν•΄λ‹Ή μ…λ ¥μ„ μ¦‰μ‹ λ΅μ»¬μ—μ„ μ μ©ν•μ—¬ μ›€μ§μ„μ„ μμΈ΅.
  μ„λ²„λ΅λ¶€ν„° authoritativeν• μ„μΉκ°€ λ„μ°©ν•λ©΄, ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ μ„μΉμ™€ μ„λ²„ μ„μΉλ¥Ό λΉ„κµν•κ³  μ¤μ°¨κ°€ μ΅΄μ¬ν•  κ²½μ° λ³΄μ •ν•μ—¬,
  μ΄λ¥Ό ν†µν•΄ λ„¤νΈμ›ν¬ μ§€μ—°μ΄ μλ” ν™κ²½μ—μ„λ„ μ¦‰κ°μ μΈ μ΅°μ‘κ°μ„ μ μ§€.
- μ„λ²„ μ¬μ΅°μ • (Server Reconciliation)
  μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈ μ…λ ¥μ„ κΈ°μ¤€μΌλ΅ μ„μΉλ¥Ό κ³„μ‚°ν•κ³ , λ¨λ“  μ΄λ™ λ΅μ§μ€ μ„λ²„μ—μ„ μµμΆ…μ μΌλ΅ κ²€μ¦ν•κ³  authoritativeν•κ² μ²λ¦¬.  
  μ„λ²„λ” μµμ‹  μ„μΉλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ£ΌκΈ°μ μΌλ΅ μ „μ†΅ν•λ©°, ν΄λΌμ΄μ–ΈνΈλ” μ΄λ¥Ό κΈ°λ°μΌλ΅ μμ‹ μ μ„μΉλ¥Ό μμ •.
- μ§€μ—° λ³΄μƒ (Lag Compensation)
  ν΄λΌμ΄μ–ΈνΈκ°€ μ…λ ¥ν• λ™μ‘μ΄ μ„λ²„μ— λ„λ‹¬ν•  λ•κΉμ§€μ μ§€μ—°μ„ λ³΄μ •ν•κΈ° μ„ν•΄, μ„λ²„λ” κ³Όκ±° μ‹μ μ κ²μ„ μƒνƒλ¥Ό μ¬ν„ν•  μ μλ„λ΅ ν”λ μ΄μ–΄ μ„μΉ κΈ°λ΅μ„ μ €μ¥.
  κ³µκ²© νμ •μ΄λ‚ μ¶©λ νμ • μ‹ ν•΄λ‹Ή μ‹μ μ„ κΈ°μ¤€μΌλ΅ μ„μΉλ¥Ό λ³µμ›ν•μ—¬ μ •ν™•ν• νμ •μ„ μν–‰.
- λ°λ“ λ μ»¤λ‹ κΈ°λ° μΊλ¦­ν„° μ„μΉ λ³΄κ°„
  μ„λ²„λ” λ‹¤λ¥Έ ν”λ μ΄μ–΄λ“¤μ μ„μΉλ¥Ό μΌμ • μ£ΌκΈ°λ΅ λΈλ΅λ“μΊμ¤νΈν•λ©°, ν΄λΌμ΄μ–ΈνΈλ” μ΄λ¥Ό μμ‹ ν• ν›„ λ§μ§€λ§‰ μ„μΉμ™€ μ΄λ™ λ°©ν–¥μ„ κΈ°λ°μΌλ΅ λ‹¤λ¥Έ ν”λ μ΄μ–΄μ μ΄λ™μ„ μμΈ΅.

### π§© μƒνƒ κ΄€λ¦¬ μ‹μ¤ν… (ν΄λΌμ΄μ–ΈνΈ)
- μƒνƒ ν¨ν„΄(State Pattern)μ„ μ‚¬μ©ν•μ—¬ ν”λ μ΄μ–΄μ μƒνƒλ¥Ό λ¨λ“ν™”
- κ° μƒνƒ(`Idle`, `Move`, `UsingSkill`, `Dead`)λ” λ…λ¦½ ν΄λμ¤λ΅ κµ¬ν„λμ–΄, μ±…μ„μ΄ λ…ν™•ν•κ³  ν™•μ¥μ— μ λ¦¬
- Enter(), Exit(), Update() λ©”μ†λ“λ¥Ό κµ¬ν„ν•μ—¬ μƒνƒ μ „ν™μ„ κ΄€λ¦¬

### π§  μ„λ²„ μ•„ν‚¤ν…μ²
- κ¶μ„μ μΈ(Authoritative) μ„λ²„ λ¨λΈ
- byte λ°°μ—΄ κΈ°λ°μ ν¨ν‚· κµ¬μ΅°

### π® κ²μ„ ν”λ μ΄
- μµλ€ 4μΈ μ‹¤μ‹κ°„ λ€μ „
- ν‰νƒ€ / νν”Ό / λ°©μ–΄ μ¤ν‚¬ μ‚¬μ© κ°€λ¥


## Based On
Packet κµ¬μ΅° λ° μ§λ ¬ν™” λ°©μ‹μ€ ν•΄λ‹Ή ν”„λ΅μ νΈλ¥Ό κΈ°λ°μΌλ΅ ν™•μ¥/μµμ ν™” ν•μ€μµλ‹λ‹¤.
[tom-weiland/tcp-udp-networking](https://github.com/tom-weiland/tcp-udp-networking)

## μ°Έκ³  μλ£
https://www.gabrielgambetta.com/client-server-game-architecture.html
https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking
https://noti.st/eiaserinnys/jCpSbp
https://blog.naver.com/linegamedev/221061964789
